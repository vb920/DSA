# 921. Minimum Add to Make Parentheses Valid

ğŸ” Iteration 1

**Pattern:** Stack / Counter

**Difficulty:** Easy

**Time:** 8m

**Solo:** Y better

### ğŸ§  Core Logic

*   **The Trick:** track **unmatched parentheses**; each time a `')'` canâ€™t be matched, it requires an **insertion**; any leftover `'('` at the end also require insertions
*   **Execution:**
    1.  (Your approach) push `'('` onto a stack; on `')'`, pop if top is `'('`, else **push** `')'`
    2.  after the scan, **answer = stack size** (each unmatched bracket requires one insertion)
    3.  (Optimal variant) use two counters (no stack):
        *   `open` = current unmatched `'('`
        *   `add` = insertions needed for unmatched `')'`
        *   for each char: if `'('` â†’ `open++`; else if `open > 0` â†’ `open--`; else `add++`
        *   result = `add + open`
*   **Complexity:**

Time `O(N)`

Space `O(N)` (your stack) â€” **optimal is `O(1)`** with the counter method

### ğŸš¨ Traps & Bugs

*   **Edge Case:** empty string â†’ `0`; all `'('` â†’ answer is length; all `')'` â†’ answer is length
*   **Input domain:** LeetCode 921 uses **only `'('` and `')'`**; your code handles `[] {}` tooâ€”unnecessary but harmless for this problem
*   **Condition clarity:** the mismatch check  
    `if (ch2!='(' && ch==')' || ch2!='[' && ch==']' || ch2!='{' && ch=='}')`  
    works due to `&&` > `||` precedence, but add parentheses for readability
*   **Data structure:** prefer `ArrayDeque<Character>` over legacy `Stack` in Java
*   **Why â€œbetterâ€ not â€œoptimalâ€:** your stack uses `O(N)` space; the **counter** solution is **`O(1)` space** and is the standard optimal approach

### ğŸ¤ 1-Sentence Pitch

*   â€œCount unmatched opens and closers in one passâ€”each stray `')'` adds 1, leftover `'('` add `open`â€”giving `O(N)` time and **`O(1)` space**.â€
